name: "[post-commit] metal - Run profiler regression"

on:
  workflow_dispatch:
  workflow_call:

jobs:
  build-artifact-profiler:
    uses: ./.github/workflows/build-artifact.yaml
    with:
      tracy: true
    secrets: inherit
  build-and-test-wheels:
    needs: build-artifact-profiler
    uses: ./.github/workflows/_build-and-test-wheels-impl.yaml
    with:
      from-precompiled: true
    secrets: inherit
  run-profiler-regression:
    needs: build-and-test-wheels
    uses: ./.github/workflows/run-profiler-regression.yaml
    secrets: inherit
